// *** React Imports
import {Fragment} from 'react'
import {Badge, Table} from 'reactstrap'

// *** Table Data & Columns
import {columns} from '../columns/UidExploitedColumnTable'
import DataTableComponent from 'components/data-table/DataTableComponent'

import {
  FilterDataTableComponent,
  ExploiteCustomerLeadsDatatable,
} from '@services/exploite-customer-leads'

const ExpandableTable = ({data}) => (
  <Table responsive hover>
    <thead>
      <tr>
        <th style={{minWidth: '180px'}}>Thông tin khách hàng</th>
        <th> </th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Email</td>
        <td>{data.email || 'Chưa có dữ liệu'}</td>
      </tr>
      <tr>
        <td>Số điện thoại</td>
        <td>{data.phone || 'Chưa có dữ liệu'}</td>
      </tr>
      <tr>
        <td>Ngày sinh</td>
        <td>{data.birthday || 'Chưa có dữ liệu'}</td>
      </tr>
      <tr>
        <td>Giới tính</td>
        <td>{data.gender || 'Chưa có dữ liệu'}</td>
      </tr>
      <tr>
        <td>Địa chỉ</td>
        <td>{data.address || 'Chưa có dữ liệu'}</td>
      </tr>
      <tr>
        <td>Trạng thái</td>
        <td>
          {data.status_info ? (
            <Badge
              color={
                data.status === 0
                  ? 'warning'
                  : data.status === 2
                  ? 'primary'
                  : 'danger'
              }
              pill
            >
              {data.status_info && data.status_info.name}
            </Badge>
          ) : (
            'Chưa có dữ liệu'
          )}
        </td>
      </tr>
      <tr>
        <td>Loại quan tâm</td>
        <td>
          {data.interest_type_info ? (
            <Badge
              color={
                data.interest_type_info && data.interest_type_info.id === 0
                  ? 'light-secondary'
                  : 'light-info'
              }
            >
              {data.interest_type_info && data.interest_type_info.name}
            </Badge>
          ) : (
            'Chưa có dữ liệu'
          )}
        </td>
      </tr>
      <tr>
        <td>Ngày tạo</td>
        <td>{data.create_date || 'Chưa có dữ liệu'}</td>
      </tr>
      <tr>
        <td>Ngày chỉnh sửa</td>
        <td>{data.update_time || 'Chưa có dữ liệu'}</td>
      </tr>
    </tbody>
  </Table>
)

const ListUidDataTable = ({type = 'group', id}) => {
  // *** query
  const {useListUidExploited} = ExploiteCustomerLeadsDatatable
  // *** States
  const query = useListUidExploited()

  return (
    <Fragment>
      <DataTableComponent
        // *** required
        columns={columns}
        query={{...query, params: {from: type, value: id}}}
        // ** optional - default undefined
        ExpandableComponent={<ExpandableTable />}
        FilterComponent={FilterDataTableComponent}
        // isExport
        searchPlaceholder="Tìm kiếm theo UID, Tên ..."
      />
    </Fragment>
  )
}

export default ListUidDataTable
