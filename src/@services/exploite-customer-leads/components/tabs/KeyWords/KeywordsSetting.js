import React, {useCallback, useState} from 'react'
import {ChevronDown, ChevronRight} from 'react-feather'
import {
  Card,
  CardBody,
  Collapse,
  CustomInput,
  Input,
  ListGroup,
  ListGroupItem,
  Row,
} from 'reactstrap'

const LIST_modal_keywords_EXPLOITEDS = [
  {
    value: 'modal_keywords_amount_find',
    label: 'Số lượng kết quả tìm kiếm',
    is_show_parent: true,
    children: [
      {
        value: 'modal_keywords_amount_find_10',
        label: '10',
      },
      {
        value: 'modal_keywords_amount_find_30',
        label: '30',
      },
      {
        value: 'modal_keywords_amount_find_50',
        label: '50',
      },
      {
        value: 'modal_keywords_amount_find_100',
        label: '100',
      },
    ],
  },
  {
    value: 'modal_keywords_page_find',
    label: 'Số trang tìm kiếm',
    is_show_parent: true,
    children: [
      {
        value: 'modal_keywords_page_find_10',
        label: '10 trang',
      },
      {
        value: 'modal_keywords_page_find_30',
        label: '30 trang',
      },
      {
        value: 'modal_keywords_page_find_50',
        label: '50 trang',
      },
      {
        value: 'modal_keywords_page_find_100',
        label: '100 trang',
      },
    ],
  },
]

const KeywordsSetting = ({changeTab}) => {
  const [datas, setDatas] = useState(LIST_modal_keywords_EXPLOITEDS)
  const [showRadio, setShowRadio] = useState({
    modal_keywords_amount_find: 'modal_keywords_amount_find_10',
    modal_keywords_page_find: 'modal_keywords_page_find_10',
  })

  const handleShowMoreParent = useCallback(value => {
    setDatas(datas =>
      datas.map(data =>
        data.value === value
          ? {...data, is_show_parent: !data.is_show_parent}
          : data,
      ),
    )
  }, [])

  const handleShowRadio = useCallback((parentValue, childValue) => {
    setShowRadio(radio => ({...radio, [parentValue]: childValue}))
  }, [])
  return (
    <>
      <Row>
        {datas.map(keywords => (
          <Card className="ml-2 mt-2 bg-transparent border-primary shadow-none">
            <CardBody>
              <div className="ml-2" key={keywords.value}>
                <div className="d-flex">
                  <CustomInput
                    type="checkbox"
                    className="custom-control-success mb-2"
                    id={keywords.value}
                    defaultChecked
                    inline
                  />
                  <div>
                    {keywords.children.length > 0 ? (
                      <div
                        type="button"
                        className="mb-2"
                        onClick={() => handleShowMoreParent(keywords.value)}
                      >
                        {keywords.label}
                        {keywords.is_show_parent ? (
                          <ChevronDown size={14} className="ml-3" />
                        ) : (
                          <ChevronRight size={14} className="ml-3" />
                        )}
                      </div>
                    ) : (
                      <div type="button" className="mb-2">
                        {keywords.label}
                      </div>
                    )}
                    {keywords.children.length > 0 && (
                      <Collapse isOpen={keywords.is_show_parent}>
                        <ListGroup
                          style={{maxWidth: '20vw'}}
                          className="ml-1 mt-2"
                        >
                          {keywords.children.map(child => (
                            <ListGroupItem
                              key={child.value}
                              className="d-flex cursor-pointer"
                              onClick={() =>
                                handleShowRadio(keywords.value, child.value)
                              }
                            >
                              <div className="px-3 py-1" size={15}>
                                <Input
                                  type="radio"
                                  name={child.value}
                                  checked={
                                    showRadio[keywords.value] === child.value
                                  }
                                />
                                <span className="ml-5">{child.label}</span>
                              </div>
                            </ListGroupItem>
                          ))}
                        </ListGroup>
                      </Collapse>
                    )}
                  </div>
                </div>
              </div>
            </CardBody>
          </Card>
        ))}
      </Row>
    </>
  )
}
export default KeywordsSetting
