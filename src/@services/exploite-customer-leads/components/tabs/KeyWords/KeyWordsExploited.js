import React, {useCallback, useState} from 'react'
import {ChevronDown, ChevronRight} from 'react-feather'
import {
  Card,
  CardBody,
  Col,
  Collapse,
  CustomInput,
  Input,
  ListGroup,
  ListGroupItem,
  Row,
} from 'reactstrap'

const LIST_KEYWORDS_EXPLOITEDS = [
  {
    value: 'keywords_amount_find',
    label: 'Số lượng kết quả tìm kiếm',
    is_show_parent: true,
    children: [
      {
        value: 'keywords_amount_find_10',
        label: '10',
      },
      {
        value: 'keywords_amount_find_30',
        label: '30',
      },
      {
        value: 'keywords_amount_find_50',
        label: '50',
      },
      {
        value: 'keywords_amount_find_100',
        label: '100',
      },
    ],
  },
  {
    value: 'keywords_page_find',
    label: 'Số trang tìm kiếm',
    is_show_parent: true,
    children: [
      {
        value: 'keywords_page_find_10',
        label: '10 trang',
      },
      {
        value: 'keywords_page_find_30',
        label: '30 trang',
      },
      {
        value: 'keywords_page_find_50',
        label: '50 trang',
      },
      {
        value: 'keywords_page_find_100',
        label: '100 trang',
      },
    ],
  },
]

const KeywordsExploited = ({changeTab}) => {
  const [datas, setDatas] = useState(LIST_KEYWORDS_EXPLOITEDS)
  const [showRadio, setShowRadio] = useState({
    keywords_amount_find: 'keywords_amount_find_10',
    keywords_page_find: 'keywords_page_find_10',
  })

  const handleShowMoreParent = useCallback(value => {
    setDatas(datas =>
      datas.map(data =>
        data.value === value
          ? {...data, is_show_parent: !data.is_show_parent}
          : data,
      ),
    )
  }, [])

  const handleShowRadio = useCallback((parentValue, childValue) => {
    setShowRadio(radio => ({...radio, [parentValue]: childValue}))
  }, [])
  return (
    <Row className='w-100'>
      {datas.map(keywords => (
        <Col md={6} key={keywords.value}>
          <Card>
            <CardBody>
              <div className="ml-5">
                <div className="d-flex">
                  <CustomInput
                    type="checkbox"
                    className="custom-control-success mt-2"
                    id={keywords.value}
                    defaultChecked
                    inline
                  />
                  <div>
                    {keywords.children.length > 0 ? (
                      <div
                        type="button"
                        className="mt-2"
                        onClick={() => handleShowMoreParent(keywords.value)}
                      >
                        {keywords.label}
                        {keywords.is_show_parent ? (
                          <ChevronDown size={14} className="ml-3" />
                        ) : (
                          <ChevronRight size={14} className="ml-3" />
                        )}
                      </div>
                    ) : (
                      <div type="button" className="mt-2">
                        {keywords.label}
                      </div>
                    )}
                    {keywords.children.length > 0 && (
                      <Collapse isOpen={keywords.is_show_parent}>
                        <ListGroup
                          style={{maxWidth: '20vw'}}
                          className="ml-1 mt-3"
                        >
                          {keywords.children.map(child => (
                            <ListGroupItem
                              key={child.value}
                              className="d-flex cursor-pointer"
                              onClick={() =>
                                handleShowRadio(keywords.value, child.value)
                              }
                            >
                              <div className="px-3 py-1" size={15}>
                                <Input
                                  type="radio"
                                  name={child.value}
                                  checked={
                                    showRadio[keywords.value] === child.value
                                  }
                                />
                                <span className="ml-5">{child.label}</span>
                              </div>
                            </ListGroupItem>
                          ))}
                        </ListGroup>
                      </Collapse>
                    )}
                  </div>
                </div>
              </div>
            </CardBody>
          </Card>
        </Col>
      ))}
    </Row>
  )
}
export default KeywordsExploited
