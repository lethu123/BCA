import keys from './key'
import {useQuery} from 'react-query'
import ExploiteCustomerLeadsApi from '../exploite-customer-leads-api'

const initialStatisticData = {
  total_fanpage: 0,
  total_personal_page: 0,
  total_group: 0,
  total_post: 0,
  total_uid: 0,
  total_lead: 0,
  total_customer: 0,
  total_revenue: 0,
}

/**
 * https://api.sasamviet.vn/redoc#operation/group_mining_statistic_statistic_group_mining_statistic_get
 * Lấy thông tin thống kê dữ liệu tổng của khai thác nhóm (Admin)
 */
const useGroupExploitedStatistic = () => {
  return useQuery(['cx', keys.GROUP_EXPLOITED_STATISTIS], () =>
    ExploiteCustomerLeadsApi.statistic.getStatisticGroupExploitedQuery(),
  )
}

/**
 * https://api.sasamviet.vn/redoc#operation/recent_retrieval_link_general_recent_retrieval_link_get
 * Lấy danh sách các link trích xuất gần đây khai thác khách hàng tiềm năng
 */
const useRecentlyExtractedLink = type => {
  const {data: dataQuery} = useQuery(
    ['cx', keys.RECENTLY_EXTRACTED_LINK, type],
    () =>
      ExploiteCustomerLeadsApi.common_table.getListRecentlyExtractedLinkQuery(
        type,
      ),
  )
  return {dataQuery}
}

/**
 * https://api.sasamviet.vn/redoc#operation/get_group_info_statistic_get_group_info__group_id__get
 * Lấy thông tin chi tiết của một nhóm (Khai thác nhóm - Cx)
 */
const useGroupExploitedInfo = id => {
  return useQuery([keys.DETAIL_GROUP_EXPLOITEDS, id], () =>
    ExploiteCustomerLeadsApi.group.getGroupExploitedInfoQuery(id),
  )
}

/**
 * https://api.sasamviet.vn/redoc#operation/post_mining_statistic_general_post_mining_statistic_get
 * Lấy thông tin thống kê dữ liệu tổng của khai thác post
 */
const usePostExploitedStatistic = () => {
  const {data: dataQuery} = useQuery(
    ['cx', keys.POST_EXPLOITED_STATISTIC],
    () => ExploiteCustomerLeadsApi.statistic.getStatisticPostExploitedQuery(),
  )
  return {dataQuery, initialData: initialStatisticData}
}

/**
 * https://api.sasamviet.vn/redoc#operation/post_mining_statistic_general_post_mining_statistic_get
 * Lấy thông tin chi tiết của 1 bài post
 */
const usePostExploitedInfo = id => {
  return useQuery([keys.DETAIL_POST_EXPLOITEDS, id], () =>
    ExploiteCustomerLeadsApi.post.getPostExploitedInfoQuery(id),
  )
}

/**
 * https://api.sasamviet.vn/redoc#operation/fanpage_mining_statistic_statistic_fanpage_mining_statistic_get
 * Lấy thông tin thống kê tổng của khai thác fanpage
 */
const useFanpageExploitedStatistic = () => {
  const {data: dataQuery} = useQuery(
    ['cx', keys.FANPAGE_EXPLOITED_STATISTIC],
    () =>
      ExploiteCustomerLeadsApi.statistic.getStatisticFanpageExploitedQuery(),
  )
  return {dataQuery, initialData: initialStatisticData}
}

/**
 * https://api.sasamviet.vn/redoc#operation/profile_mining_statistic_statistic_profile_mining_statistic_get
 * Lấy thông tin thống kê tổng của khai thác profile
 */
const useProfileExploitedStatistic = () => {
  const {data: dataQuery} = useQuery(
    ['cx', keys.PROFILE_EXPLOITED_STATISTIC],
    () =>
      ExploiteCustomerLeadsApi.statistic.getStatisticProfileExploitedQuery(),
  )
  return {dataQuery, initialData: initialStatisticData}
}

const ExploiteCustomerLeadsQuery = {
  // statistic
  useGroupExploitedStatistic,
  usePostExploitedStatistic,
  useFanpageExploitedStatistic,
  useProfileExploitedStatistic,
  // info
  usePostExploitedInfo,
  useGroupExploitedInfo,
  // list
  useRecentlyExtractedLink,
}

export default ExploiteCustomerLeadsQuery
